function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequire165c;let i,l;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequire165c=o),o.register("27Lyk",(function(t,n){var r,o;e(t.exports,"register",(()=>r),(e=>r=e)),e(t.exports,"resolve",(()=>o),(e=>o=e));var i={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},o=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o("27Lyk").register(JSON.parse('{"1Gxa9":"index.99f1eba9.js","eiVB1":"worker.a45f3902.js"}'));let a={initialized:!1,runningSolve:!1,runningSuggest:!1,worker:null};var s,d={};s=function(e,t,n){if(t===self.location.origin)return e;var r=n?"import "+JSON.stringify(e)+";":"importScripts("+JSON.stringify(e)+");";return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))};let u=new URL(o("27Lyk").resolve("eiVB1"),import.meta.url);d=s(u.toString(),u.origin,!0);let c=()=>function(){let e=new Worker(d),t={eventType:"INITIALIZE"};return new Promise(((n,r)=>{e.onerror=r,e.onmessageerror=r,e.onmessage=t=>{"INITIALIZED"==t.data.eventType&&(e.onmessage=function(){},n(e))},e.postMessage(t)}))}().then((e=>{e.addEventListener("error",(e=>f(new Error(e.message)))),e.addEventListener("message",p),a={initialized:!0,runningSolve:!1,runningSuggest:!1,worker:e}})),g=e=>{},m=()=>{},f=e=>{};function p(e){if("INITIALIZED"==e.data.eventType)throw new Error("double initialization");if("EMIT"==e.data.eventType)i(e.data.solution,e.data.updatedIndex);else if("EMIT_SUGGESTION"==e.data.eventType)l(e.data.suggestion);else if("ERROR"==e.data.eventType)f(e.data.error);else if("FINISH"==e.data.eventType)console.timeEnd("solve"),a.runningSolve=!1,g(e.data.stats);else if("FINISH_SUGGESTION"==e.data.eventType)console.timeEnd("suggest"),a.runningSuggest=!1,m();else{e.data}}function v(e){if(!a.initialized)return console.warn("attempted to solve before initialization"),Promise.resolve(void 0);if(a.runningSolve||a.runningSuggest)return console.warn("terminating worker for new request"),console.timeEnd("solve"),a.worker.terminate(),c().then((()=>v(e)));console.time("solve"),a.runningSolve=!0;let t={eventType:"CALL",params:e};return a.worker.postMessage(t),new Promise(((e,t)=>{g=e,f=t}))}function y(e){if(!a.initialized)return console.warn("attempted to solve before initialization"),Promise.resolve(void 0);if(a.runningSolve||a.runningSuggest)return console.warn("terminating worker for new request"),console.timeEnd("suggest"),a.worker.terminate(),c().then((()=>y(e)));console.time("suggest"),a.runningSuggest=!0;let t={eventType:"SUGGEST",params:e};return a.worker.postMessage(t),new Promise(((e,t)=>{m=e,f=t}))}c();let h=document.getElementById("themeToggleButton"),E=window.matchMedia("(prefers-color-scheme: dark)"),w="theme",S="dark-theme",I="light-theme",b=localStorage.getItem(w);"dark"==b?document.body.classList.toggle(S):"light"==b?document.body.classList.toggle(I):b=E.matches?"dark":"light",h.textContent=`Theme: ${b}`,h.addEventListener("click",(()=>{let e;E.matches?(document.body.classList.toggle(I),e=document.body.classList.contains(I)?"light":"dark"):(document.body.classList.toggle(S),e=document.body.classList.contains(S)?"dark":"light"),localStorage.setItem(w,e),h.textContent=`Theme: ${e}`}));let L,C=document.getElementById("solveBtn"),k=document.getElementById("solveOutputList"),T=document.getElementById("solveLoadingIndicator"),x=document.getElementById("suggestBtn"),B=document.getElementById("suggestOutputList"),N=document.getElementById("suggestLoadingIndicator"),R=document.getElementById("errorMessage"),$=document.getElementById("statsMessage"),O=(document.getElementById("settings"),document.getElementById("timeTable")),M=document.getElementById("nSolutions"),P=document.getElementById("maxRestarts"),U=document.getElementById("onlyRequiredRestarts"),_=(document.getElementById("restartPenalty"),document.getElementById("suggestFrameThreshold"));x.disabled=!0,O.addEventListener("keypress",(e=>{"Enter"===e.key&&e.ctrlKey&&(e.preventDefault(),C.click())}));let q=e=>T.classList.toggle("disabled",!e),z=e=>N.classList.toggle("disabled",!e);function D(e){let t=document.createElement("code"),n=e.flatMap(((e,t)=>{if(0==t)return[];let n=[];if(0===e){let e=document.createElement("span");e.textContent="[R] ",e.className="restart",n.push(e)}else{let t=e.toString();n.push(t+" "),length=t.length}return n}));return t.replaceChildren(...n),t}function G(e,t){let n=e%1e3,r=(e=(e-n)/1e3)%60,o=(e=(e-r)/60)%60,i=(e-o)/60,l=`${r.toString().padStart(2,"0")}.${n.toString().padStart(3,"0")}`;return(t||0!=o)&&(l=`${o.toString().padStart(2,"0")}:${l}`),0!=i&&(l=`${i.toString().padStart(2,"0")}:${l}`),l}i=(e,t)=>{let n=Number(M.value);(void 0===L||e.time<L)&&(L=e.time);let r=function(e){let t=document.createElement("span");t.className="time",t.textContent=`${G(17*e.time,!0)} (${e.time}): `;let n=D(e.route),r=document.createElement("li");return r.className="newSolution",r.replaceChildren(t," ",n),r}(e);var o,i,l;i=r,(l=t)>=(o=k).childElementCount?o.appendChild(i):k.insertBefore(i,o.children[l]),function(e,t){for(;e.childElementCount>t;)e.removeChild(e.lastChild)}(k,n)},l=e=>{let t=function(e){if(void 0===L)throw new Error("attempted to suggest new drafts without solving first");let t=L-e.time,n=document.createElement("span");n.textContent=`${e.start}-${e.end}`,n.className="suggestConnection";let r=document.createElement("span");r.className="time",r.textContent=`[${t}f]`;let o=D(e.route),i=document.createElement("li");return i.className="newSolution",i.replaceChildren(n," ",r," ",o),i}(e);B.appendChild(t)},C.addEventListener("click",(()=>{q(!0),z(!1),x.disabled=!0,L=void 0,k.replaceChildren(),B.replaceChildren(),$.textContent="",R.textContent="";let e=O.value,t=Number(M.value),n=""!==P.value?Number(P.value):void 0,r=U.checked,o=Date.now();v({table:e,maxSolutions:t,maxRestarts:n,onlyRequiredRestarts:r,restartPenalty:190}).then((e=>{let t=Date.now();if(e){let n=`${e.solutions} solutions found, ${e.iterations} calls to pathfind function and ${e.cutBranches} cut branches, in ${G(t-o,!0)} `;$.textContent=n}else $.textContent="Code not fully loaded yet, try again later";x.disabled=!1})).catch((e=>{R.textContent=`Error: ${e.message}`,console.error(e)})).finally((()=>{q(!1)}))})),x.addEventListener("click",(()=>{if(void 0===L)throw new Error("attempted to suggest new drafts without solving first");z(!0),B.replaceChildren();let e=O.value,t=""!==P.value?Number(P.value):void 0,n=U.checked,r=Number(_.value);y({table:e,maxRestarts:t,onlyRequiredRestarts:n,restartPenalty:190,timeToBeat:L-r}).catch((e=>{R.textContent=`Error: ${e.message}`,console.error(e)})).finally((()=>{z(!0)}))}));
//# sourceMappingURL=index.99f1eba9.js.map
